/* ================================================= */
/* === 1. GLOBAL ENGINE: Reset & Variables       === */
/* ================================================= */
html {
  -webkit-text-size-adjust: 100%;
  -moz-text-size-adjust: 100%;
  text-size-adjust: 100%;
}
/* The "Stability" Reset */
*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

:root {
  /* --- 1. BRAND CHANNELS (Raw Ingredients) --- */
  --sys-color-primary-rgb: 1, 98, 75;
  --sys-color-accent-rgb: 255, 0, 255; /* Magenta */
  --sys-color-surface-rgb: 255, 255, 255;
  --sys-color-on-surface-rgb: 51, 51, 51; /* Charcoal #333333 */

  /* --- 2. SEMANTIC ROLES --- */
  --sys-color-primary: rgb(var(--sys-color-primary-rgb));
  --sys-color-accent: rgb(var(--sys-color-accent-rgb));
  --sys-color-surface: rgb(var(--sys-color-surface-rgb));
  --sys-color-surface-variant: #f0f7f5;

  /* Tonal Containers */
  --sys-color-primary-container: rgba(var(--sys-color-primary-rgb), 0.12);
  --sys-color-on-primary-container: var(--sys-color-primary);

  /* Typography Hierarchy */
  --sys-color-on-surface: rgb(var(--sys-color-on-surface-rgb));
  --sys-color-on-surface-emphasis: #0a0a0a;
  --sys-color-on-primary: var(--sys-color-surface);

  /* Interaction & UI */
  --sys-color-outline: #555555;
  --sys-color-focus-halo: rgba(var(--sys-color-primary-rgb), 0.4);
  --sys-color-error: #b00020;

  /* --- 3. DEPTH & EFFECTS --- */
  --sys-shadow-navbar-accent: inset 0 -4px 6px -4px var(--sys-color-accent);

  --glow-primary: 0 0 0.3125rem var(--sys-color-primary);
  --glow-accent-strong: 0 0 10px 0 var(--sys-color-accent);
  --glow-accent-subtle: 0 0 10px 0 rgba(var(--sys-color-accent-rgb), 0.4);

  --sys-glow-accent-inset: inset 0 0 10px 0
    rgba(var(--sys-color-accent-rgb), 0.4);
  --sys-glow-primary-inset: inset 0 0 0.3125rem var(--sys-color-primary);

  --shadow-subtle: 0 0.25rem 0.5rem rgba(0, 0, 0, 0.2);
  --shadow-modal: 0 4px 8px 0 rgba(0, 0, 0, 0.2),
    0 6px 20px 0 rgba(0, 0, 0, 0.19);

  /* --- GLOBAL FONTS --- */
  --font-display: "Poppins", sans-serif;
  --font-body: "Inter", sans-serif;
  font-size: 16px;
  --font-size-base: 1rem;
}

/* ================================================= */
/* === [V3] GLOBAL LAYOUT & ATMOSPHERE (UPDATED) === */
/* ================================================= */

body::before {
  content: "";
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  z-index: -1;
  /* DESKTOP DEFAULT */
  background-image: radial-gradient(
    ellipse at 50% 30%,
    var(--sys-color-primary) 0%,
    var(--sys-color-primary) 45%,
    var(--sys-color-surface-variant) 100%
  );
  background-repeat: no-repeat;
  background-size: cover;
  transition: background-image 0.3s ease; /* Smooth transition when resizing */
}

/* TABLET ADJUSTMENT (Below 1070px) */
@media screen and (max-width: 1070px) {
  body::before {
    /* We "stretch" the solid green core to 65% to protect the centered links/brackets */
    background-image: radial-gradient(
      ellipse at 50% 30%,
      var(--sys-color-primary) 0%,
      var(--sys-color-primary) 60%,
      var(--sys-color-surface-variant) 100%
    );
  }
}

/* MOBILE ADJUSTMENT (Below 768px) */
@media screen and (max-width: 768px) {
  body::before {
    /* In mobile, the content is narrow but long. 
       We make the gradient almost entirely solid to maintain legibility. */
    background-image: radial-gradient(
      ellipse at 50% 35%,
      var(--sys-color-primary) 0%,
      var(--sys-color-primary) 60%,
      var(--sys-color-surface-variant) 100%
    );
  }
}

/* The 'Spine' of the site */
.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 1.25rem;
  width: 100%;
}

/* ================================================= */
/* === 2. NAVBAR: The "Chrome Tab" Architecture  === */
/* ================================================= */

.navbar {
  background-color: var(--sys-color-on-surface); /* Charcoal */
  display: flex;
  align-items: center;
  position: sticky;
  top: 0;
  z-index: 1000;
  /* Height is now driven by the link padding for stability */
  box-shadow: var(--sys-shadow-navbar-accent);
}

/* 1. THE TOGGLE (Hamburger - HIDDEN BY DEFAULT) */
.navbar__toggle {
  display: none;
  float: right;
  color: var(--sys-color-accent);
  padding: 14px 24px; /* Matches the vertical height of desktop links */
  font-size: 1.5rem;
  cursor: pointer;
  text-decoration: none;
  position: relative; /* Necessary for the magenta underline */
  transition: background-color 0.2s ease, color 0.2s ease;
}

/* Mimic the Desktop Navlink Hover */
.navbar__toggle:hover {
  background-color: #444; /* Charcoal shift */
  color: var(--sys-color-surface); /* Shifts icon to white for contrast */
}

/* The Magenta Line mimic */
.navbar__toggle:hover::after {
  content: "";
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  border-bottom: 3px solid var(--sys-color-accent); /* Magenta Signal */
}

/* 2. THE LINKS CONTAINER (Pushed to the Right) */
.navbar__links {
  display: flex;
  justify-content: flex-end; /* RIGHT ALIGNED */
  width: 100%;
  padding-right: 20px; /* Room for the bracket */
}

/* Base Link Style: The "Hit-Box" */
.navbar__link {
  font-family: var(--font-body);
  font-size: 17px;
  font-weight: 400;
  color: var(--sys-color-surface);
  text-decoration: none;

  /* RESTORED: Padding creates the clickable area and tab width */
  padding: 14px 24px;
  display: inline-block; /* Essential for the bracket positioning */
  transition: all 0.2s ease;
  position: relative;
}

/* THE HOVER: Tonal shift + Magenta Pathway */
.navbar__link:hover:not(.active) {
  background-color: #444;
}

.navbar__link:hover:not(.active)::after {
  content: "";
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  border-bottom: 3px solid var(--sys-color-accent); /* Magenta Signal */
}

/* THE ACTIVE TAB: The 'Bridge' */
.navbar__link.active {
  background-color: var(--sys-color-primary); /* Dark Pine */
  color: white;
  border-radius: 12px 12px 0 0;
  z-index: 1001;
  /* This margin-bottom pulls the tab down to cover the rail */
  margin-bottom: -3px;

  /* UX ADDITION: Remove interactivity from current page tab */
  cursor: default;
  pointer-events: none;
}

/* THE BRACKETS: Fixed Positioning */
.navbar__link.active::before,
.navbar__link.active::after {
  content: "";
  position: absolute;
  bottom: 0;
  width: 20px;
  height: 20px;
  background-color: transparent;
  box-shadow: 0 10px 0 0 var(--sys-color-primary);
  pointer-events: none; /* Prevents brackets from being clickable */
}

.navbar__link.active::before {
  left: -19px;
  border-bottom-right-radius: 19px;
}

.navbar__link.active::after {
  right: -19px;
  border-bottom-left-radius: 19px;
}

/* 6. RESPONSIVE ENGINE (Breakpoint: 768px) */
@media screen and (max-width: 768px) {
  .navbar {
    flex-direction: column;
    align-items: flex-start;
  }

  .navbar__toggle {
    display: block; /* Hamburger only appears on Mobile */
  }

  .navbar__links {
    display: none; /* Links hidden until toggled */
    flex-direction: column;
    justify-content: flex-start;
    padding-right: 0;
  }

  /* State triggered by toggleMobileNav() in script.js */
  .navbar.responsive .navbar__links {
    display: flex;
    width: 100%;
  }

  .navbar__link {
    width: 100%;
    margin-bottom: 0;
    border-radius: 0;
  }

  .navbar__link.active {
    /* Restore pointer-events for mobile menu accessibility if needed, 
       otherwise keep none to prevent refresh */
    pointer-events: none;
  }

  .navbar__link.active::before,
  .navbar__link.active::after {
    display: none; /* Brackets disabled for vertical stack */
  }
}

/* ================================================= */
/* === [V3] REFACTORED: FEATURE BLOCK (ZIG-ZAG)  === */
/* ================================================= */

/* --- 1. THE BLOCK (Container) --- */
.feature-block {
  background-color: var(--sys-color-surface);
  padding: 4rem 1.25rem;
  margin-bottom: 18px; /* Tighter 18px Gutter Splash */
  width: 100%;
}

/* Modifiers for Block */
.feature-block--first {
  margin-top: 18px;
  border-radius: 2rem 2rem 0 0; /* Rounded shoulders */
}

.feature-block--alt {
  background-color: var(
    --sys-color-surface-variant
  ) !important; /* Force Light Pine */
}

/* --- 2. THE GRID (Flex Layout) --- */
.feature-block__grid {
  display: flex;
  flex-direction: column; /* Mobile stack by default */
  gap: 2rem;
  max-width: 1200px;
  margin: 0 auto;
  align-items: center;
}

/* --- 3. MEDIA (Image Styling) --- */
.feature-block__image {
  width: 500px;
  height: 500px;
  object-fit: cover;
  border-radius: 8px;
  box-shadow: 0 0 15px rgba(255, 0, 255, 0.3); /* Violet Glow */
}

/* --- 4. CONTENT (Text & Typography) --- */
.feature-block__content {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

.feature-block__title--column {
  font-size: 1.8rem;
  max-width: 26ch;
  color: var(--sys-color-on-surface);
  margin-bottom: 2rem;
  font-family: "Poppins", sans-serif;
  line-height: 1.3;
  text-align: center;
}

.feature-block__intro-text {
  font-family: var(--font-body);
  font-size: 1.125rem;
  line-height: 1.6;
  max-width: 45ch;
  margin-bottom: 1.5rem;
}

.feature-block__jump-link {
  font-size: 1.25rem;
  color: var(--sys-color-primary);
  margin-bottom: 1rem;
}

/* --- 5. QUOTES & AUTHORS --- */
.feature-block__quote-container {
  width: 400px;
  max-width: 100%;
}

.feature-block__quote-box {
  background-color: var(--sys-color-surface-variant);
  padding: 1.5rem;
  border-left: 2px solid var(--sys-color-accent);
  border-radius: 8px;
  font-size: 1.125rem;
  font-style: italic;
  width: 100%;
  text-align: center;
}

.feature-block__quote-box--on-alt {
  background-color: var(--sys-color-surface) !important;
  border-left: none !important;
  border-right: 2px solid var(--sys-color-accent);
}

.feature-block__author {
  text-align: right;
  margin-top: 1rem;
  font-size: 1rem;
  color: var(--sys-color-primary);
  width: 100%;
}

/* --- 6. RESPONSIVE ENGINE --- */

/* Mobile Stack Flip */
.feature-block__grid--reverse {
  flex-direction: column-reverse;
}

/* Desktop Pivot (1025px+) */
@media screen and (min-width: 1025px) {
  .feature-block__grid {
    flex-direction: row;
    justify-content: center;
    gap: 5rem;
  }

  /* Fixed: Nested inside media query to override Desktop Row */
  .feature-block__grid--reverse {
    flex-direction: row-reverse;
  }
}

/* Mobile Adjustments (600px-) */
@media screen and (max-width: 600px) {
  .feature-block__image {
    width: 320px;
    height: 320px;
  }
}

/* ================================================= */
/* === [V3] GLOBAL LAYOUT & WRAPPERS             === */
/* ================================================= */

/* 1. HERO COMPONENT */
.hero {
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 40vh;
  padding: 5rem 1.25rem 2rem 1.25rem;
  text-align: center;
}

.hero__content {
  max-width: 65ch; /* Optimized for readability */
  margin: 0 auto;
}

.hero__title {
  font-family: var(--font-display);
  font-size: 3.25rem;
  color: var(--sys-color-on-primary);
  margin-bottom: 1rem;
  line-height: 1.1;
  font-weight: 700;
}

.hero__subtitle {
  font-family: var(--font-body);
  font-size: 1.25rem;
  color: var(--sys-color-on-primary);
  line-height: 1.5;
}

/* 2. ACCESSIBILITY */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* ================================================= */
/* === [V3] SLIDESHOW BONES                      === */
/* ================================================= */

.slideshow {
  max-width: 500px;
  height: 400px; /* The "No-Jump" Anchor */
  margin: 0 auto;
  position: relative;
}

.slideshow__slide {
  display: none;
  height: 100%;
}

.slideshow__slide.active {
  display: block;
}

.slideshow__image {
  width: 100%;
  height: 100%;
  object-fit: contain;
  border-radius: 28px;
  box-shadow: var(--sys-shadow-1);
}

/* --- 3. CONTROLS & FEEDBACK --- */
.slideshow__control--prev,
.slideshow__control--next {
  position: absolute;
  top: 55%; /* Nudged for visual center */
  z-index: 10;
  cursor: pointer;
  background: rgba(255, 255, 255, 0.2);
  backdrop-filter: blur(4px);
  border-radius: 50%;
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  transition: all 0.3s ease;
}

.slideshow__control--prev {
  left: -80px;
}
.slideshow__control--next {
  right: -80px;
}

/* Magenta "Energy" feedback */
.slideshow__control--prev:hover,
.slideshow__control--next:hover {
  background-color: var(--sys-color-accent);
  transform: scale(1.1);
}

.slideshow__dots {
  text-align: center;
  padding: 1.5rem 0;
}

.slideshow__dot {
  background-color: rgba(255, 255, 255, 0.3);
  width: 10px;
  height: 10px;
  border-radius: 50%;
  display: inline-block;
  margin: 0 6px;
  cursor: pointer;
  transition: all 0.3s ease;
}

/* Hover: Magenta Energy indicator */
.slideshow__dot:hover {
  background-color: var(--sys-color-accent);
}

/* Active: White Pill for high contrast on Pine */
.slideshow__dot.active {
  background-color: white;
  width: 24px;
  border-radius: 6px;
}

/* ================================================= */
/* === [V3] REFACTORED: BUTTONS & ACTIONS        === */
/* ================================================= */

/* 1. THE BLOCK (Base Style) */
.button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.8rem 1.6rem;
  border-radius: 0.5rem;
  font-family: inherit;
  font-weight: 600;
  font-size: 1rem;
  text-decoration: none;
  border: none;
  cursor: pointer;
  gap: 8px; /* Space for icons like LinkedIn/Hand */

  /* Premium Motion Engine */
  transition: background-color 200ms ease-in-out, transform 150ms ease-in-out,
    box-shadow 200ms ease-in-out, opacity 250ms ease;
}

/* 2. MODIFIER: PRIMARY (Brand Action) */
.button--primary {
  background-color: var(--sys-color-primary);
  color: var(--sys-color-on-primary);
}

.button--primary:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 4px 15px rgba(var(--sys-color-accent-rgb), 0.4);
}

/* 3. MODIFIER: TONAL (Secondary Action) */
.button--tonal {
  background-color: var(--sys-color-primary-container);
  color: var(--sys-color-on-primary-container);
}

.button--tonal:hover:not(:disabled) {
  transform: translateY(-2px);
  background-color: rgba(var(--sys-color-primary-rgb), 0.2);
}

/* 4. MODIFIER: CLOSE / ICON BUTTON (For Modals/Nav) */
.button--close {
  background: transparent;
  color: var(--sys-color-on-p);
  padding: 0.5rem;
  font-size: 1.5rem;
  line-height: 1;
  border-radius: 50%;
  width: 44px;
  height: 44px;
}

.button--close:hover {
  background-color: rgba(var(--sys-color-on-surface-rgb), 0.1);
  color: var(--sys-color-accent); /* Magenta feedback on close */
}

/* 5. THE BUTTON GROUP (Layout Wrapper) */
.button-group {
  margin-top: 2rem;
  display: flex;
  justify-content: center;
  gap: 1rem;
  flex-wrap: wrap; /* Prevents overflow on tiny screens */
}

/* RESPONSIVE: Stack buttons on small screens */
@media screen and (max-width: 600px) {
  .button-group {
    flex-direction: column;
    align-items: stretch;
  }

  .button-group .button {
    width: 100%; /* Full-width mobile buttons */
  }
}

/* ================================================= */
/* === [V3] REFACTORED: CONTACT MODAL & FORM      === */
/* ================================================= */

/* 1. THE OVERLAY (Dark Shadow) */
.contact-modal {
  display: flex;
  align-items: center;
  justify-content: center;
  position: fixed;
  z-index: 2000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.7);
  overflow-y: auto;
}

/* 2. THE CONTENT CARD (Outer Shell) */
.contact-modal__content {
  position: relative;
  background-color: var(--sys-color-surface);
  padding: 1.5rem; /* Reduced padding to let the inner form shine */
  border-radius: 0.8rem;
  border: 1px solid var(--sys-color-outline);
  width: 90%;
  max-width: 500px;
  box-shadow: var(--shadow-modal);
  animation: modal-open-anim 0.4s ease-out;
}

/* 3. THE INNER FORM (Pine Green Backdrop) */
.contact-modal__form {
  border-radius: 0.3125rem;
  background-color: var(--sys-color-surface-variant); /* YOUR PINE BACKDROP */
  padding: 1.5rem;
  /* Restoring the subtle violet accent glow to the form container */
  box-shadow: var(--shadow-subtle), var(--glow-accent-subtle);
}

.contact-modal__form h2 {
  max-width: 100%;
  text-align: center;
  margin-bottom: 1.2rem;
  color: white; /* Contrast against the Pine background */
}

/* 4. BRANDED INPUTS (Green Border + Violet Glow) */
.contact-modal__form input[type="text"],
.contact-modal__form input[type="email"],
.contact-modal__form textarea {
  width: 100%;
  padding: 0.75rem;
  border: 1px solid var(--sys-color-primary); /* PINE BORDER */
  border-radius: 0.5rem;
  margin-top: 0.375rem;
  margin-bottom: 1rem;
  font-family: inherit;
  font-size: 1rem;
  background-color: var(--sys-color-surface);
  box-sizing: border-box;
  transition: all 0.2s ease;
}

/* FOCUS STATE: Magenta Energy Glow */
.contact-modal__form input:focus,
.contact-modal__form textarea:focus {
  border-color: var(--sys-color-accent); /* MAGENTA BORDER */
  box-shadow: var(--glow-accent-subtle); /* VIOLET GLOW */
  outline: none;
}

/* 5. THE SUBMIT BUTTON & DISABLED STATE */
.contact-modal__button--submit {
  width: 100%;
  margin-top: 1rem;
}

/* Restoring your specific hover glow for the submit button */
.contact-modal__form .contact-modal__button--submit:hover:not(:disabled) {
  box-shadow: var(--glow-accent-strong-inset), var(--glow-accent-subtle);
}

/* THE PRO DISABLED STATE: Restored */
.contact-modal__button--submit:disabled {
  opacity: 0.45;
  cursor: not-allowed;
  pointer-events: none;
  filter: grayscale(0.4);
  transform: none;
}

/* 6. CLOSE ICON (With your requested rotation) */
.contact-modal__close-icon {
  position: absolute;
  top: 5px;
  right: 5px;
  background: none;
  border: none;
  font-size: 22px;
  color: var(--sys-color-on-surface);
  cursor: pointer;
  padding: 5px;
  transition: color 0.2s ease, transform 0.3s ease;
  z-index: 10;
}

.contact-modal__close-icon:hover {
  color: var(--sys-color-accent);
  transform: rotate(90deg);
}

/* ================================================= */
/* === [V3] TABLET TRANSITION (1070px to 769px)   === */
/* ================================================= */
@media screen and (max-width: 1070px) and (min-width: 769px) {
  .navbar__links {
    justify-content: center; /* Stop the slide-left; keep it safe in the center */
    padding-right: 0;
  }

  .hero__title {
    font-size: 2.75rem; /* Slightly smaller for tablet */
  }

  .feature-block__grid {
    gap: 3rem; /* Tighten up the gutters */
  }
}

/* ================================================= */
/* === [V3] UNIFIED RESPONSIVE ENGINE (809px)    === */
/* ================================================= */

@media screen and (max-width: 809px) {
  /* --- A. NAVBAR MOBILE --- */
  .navbar {
    display: block; /* Allows float logic for toggle/name if needed */
    flex-direction: column;
    align-items: flex-start;
    overflow: hidden;
  }

  /* Hamburger Icon Styling */
  .navbar__toggle {
    display: block;
    float: right; /* Puts hamburger on the right */
    color: var(--sys-color-accent);
    padding: 1rem;
    font-size: 1.5rem;
    transition: color 0.2s ease;
  }

  .navbar__links {
    display: none; /* Hidden by default on mobile */
    flex-direction: column;
    width: 100%;
    padding-right: 0;
    clear: both; /* Ensures links stack below the header row */
  }

  /* State triggered by toggleMobileNav() in script.js */
  .navbar.responsive .navbar__links {
    display: flex;
  }

  /* SWITCH TO "X" ICON: Using your FontAwesome Unicode */
  .navbar.responsive .navbar__toggle i::before {
    content: "\f00d"; /* fa-times (X) */
    color: var(--sys-color-accent);
  }

  .navbar__link {
    width: 100%;
    padding: 1rem 1.5rem;
    border-radius: 0 !important;
    margin-bottom: 0 !important;
    text-align: left;
    pointer-events: auto; /* Ensure links are clickable in mobile menu */
  }

  /* Remove 'Chrome Tab' brackets for vertical mobile stack */
  .navbar__link.active::before,
  .navbar__link.active::after {
    display: none;
  }

  /* --- B. SLIDESHOW MOBILE --- */
  .slideshow {
    height: 300px;
    max-width: 100%;
  }

  .slideshow__control--prev,
  .slideshow__control--next {
    top: 50%;
    transform: translateY(-50%);
    width: 44px; /* Larger tap target for fingers */
    height: 44px;
  }

  .slideshow__control--prev {
    left: 5px;
  }
  .slideshow__control--next {
    right: 5px;
  }

  /* --- C. FEATURE BLOCKS MOBILE --- */
  .feature-block__grid {
    grid-template-columns: 1fr; /* Stack images and text */
    gap: 2rem;
  }

  .feature-block__media {
    order: -1; /* Image always appears above text on mobile */
  }

  /* --- D. TYPOGRAPHY & BUTTONS MOBILE --- */
  .hero__title {
    font-size: 2.5rem;
  }

  .button-group {
    flex-direction: column;
    align-items: stretch;
  }

  .button-group .button {
    width: 100%;
  }
}
