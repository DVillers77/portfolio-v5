/* ================================================= */
/* === 1. GLOBAL COLOR PALETTE & EFFECTS (CSS Variables) === */
/* ================================================= */
:root {
  /* --- 1. BRAND CHANNELS (Raw Ingredients) --- */
  --sys-color-primary-rgb: 1, 98, 75; /* Dark Pine Green */
  --sys-color-accent-rgb: 255, 0, 255; /* Magenta */
  --sys-color-surface-rgb: 255, 255, 255; /* White */
  --sys-color-on-surface-rgb: 51, 51, 51; /* Charcoal #333333 */

  /* --- 2. SEMANTIC ROLES (The Theme Engine) --- */
  --sys-color-primary: rgb(var(--sys-color-primary-rgb));
  --sys-color-accent: rgb(var(--sys-color-accent-rgb));

  --sys-color-surface: rgb(var(--sys-color-surface-rgb));
  --sys-color-surface-variant: #f0f7f5; /* Light Pine background tint */

  /* Tonal Containers (For Secondary Buttons/Nav Hover) */
  --sys-color-primary-container: rgba(var(--sys-color-primary-rgb), 0.12);
  --sys-color-on-primary-container: var(--sys-color-primary);

  /* Typography Hierarchy */
  --sys-color-on-surface: rgb(var(--sys-color-on-surface-rgb));
  --sys-color-on-surface-emphasis: #0a0a0a;
  --sys-color-on-primary: var(--sys-color-surface);

  /* Interaction & UI */
  --sys-color-outline: #555555;
  --sys-color-focus-halo: rgba(var(--sys-color-primary-rgb), 0.4);
  --sys-color-error: #b00020;

  /* --- 3. DEPTH & EFFECTS (Shadows & Glows) --- */
  --sys-shadow-navbar-accent: inset 0 -4px 6px -4px var(--sys-color-accent);

  --glow-primary: 0 0 0.3125rem var(--sys-color-primary);
  --glow-accent-strong: 0 0 10px 0 var(--sys-color-accent);
  --glow-accent-subtle: 0 0 10px 0 rgba(var(--sys-color-accent-rgb), 0.4);

  --sys-glow-accent-inset: inset 0 0 10px 0
    rgba(var(--sys-color-accent-rgb), 0.4);
  --sys-glow-primary-inset: inset 0 0 0.3125rem var(--sys-color-primary);

  --shadow-subtle: 0 0.25rem 0.5rem rgba(0, 0, 0, 0.2);
  --shadow-modal: 0 4px 8px 0 rgba(0, 0, 0, 0.2),
    0 6px 20px 0 rgba(0, 0, 0, 0.19);
  /* --- NEW: Global Fonts (Added based on Style Guide) --- */
  --font-display: "Poppins", sans-serif;
  --font-body: "Inter", sans-serif;
}

/* ================================================= */
/* === 2. BASE STYLES & TYPOGRAPHY === */
/* ================================================= */

:root {
  /* Establishes 1rem = 16px */
  font-size: 100%;
  /* TYPOGRAPHY VARIABLES */
  --font-display: "Poppins", sans-serif; /* For H1, H2, Navbar */
  --font-body: "Inter", sans-serif; /* For P, Lists, UI text */
  --font-size-base: 1rem;
}

body {
  /* Ensures the base font-family uses the variable */
  font-family: var(--font-body);
  font-size: var(--font-size-base);
  color: var(
    --sys-color-on-surface
  ); /* Ensure accessibility by defaulting to the dark color */
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

/* Ensure all headings use the display font */
h1,
h2,
h3,
h4,
h5,
h6 {
  font-family: var(--font-display);
  /* Ensure the darkest color is used for highest contrast */
  color: var(--sys-color-on-surface-emphasis);
}

/* Mobile base font sizes */
h1 {
  font-size: 1.8rem; /* Mobile size for H1 */
}

h2 {
  font-size: 1.5rem; /* Mobile size for H2 */
}

/* Global reset for box-model and spacing */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

p {
  font-family: var(--font-body);
  font-weight: 400;
  font-style: normal;
}

/* Adds vertical space between successive paragraph or heading elements */
p + p,
p + h2,
p + h3,
h3 + p,
h2 + p,
h1 + p {
  margin-top: 1em;
}

/* Consistent sans-serif font for navigation and headings */
.navbar,
h1,
h2,
h3 {
  font-family: var(--font-display);
}

/* ================================================= */
/* === 3. NAVBAR STYLING (Top and Bottom) === */
/* ================================================= */

/* --- New Spacer Styles --- */
.navbar__links .navbar__spacer-right {
  /* Gives the spacer the same dimensions as a link item but keeps it visually hidden */
  padding: 1rem;
  color: transparent;
  font-size: 1.125rem;
  position: relative;
  z-index: 1001;
}

.navbar {
  width: 100%;
  background-color: var(
    --sys-color-on-surface
  ); /* Dark background for navigation bar */
  overflow: auto;
  box-shadow: var(
    --sys-shadow-navbar-accent
  ); /* Violet inset shadow for top edge style */
  z-index: 1000; /* Ensures the navbar sits above page content */

  /* Use Flexbox for cleaner desktop positioning */
  display: flex;
  justify-content: flex-end; /* Pushes the main menu links to the right on desktop */
}

.navbar__link {
  padding: 1rem;
  color: var(--sys-color-surface);
  text-decoration: none;
  font-size: 1.125rem;
  /* CRITICAL: Establishes a stacking context and layer (z-index 1001) for the link
     to sit above its own pseudo-elements (z-index 1000), enabling the inverted corner hover effect. */
  position: relative;
  z-index: 1001;
}

.navbar__link:hover {
  background-color: var(--sys-color-primary);
  color: var(--sys-color-on-primary);
  /* Violet inset glow for interactive feedback on hover */
  box-shadow: var(--glow-accent-strong-inset);
}

.navbar__link.active:hover {
  background-color: var(--sys-color-surface);
  cursor: default;
  /* Active link hover is a passive state, so shadows are removed */
  box-shadow: none;
}

/* --- Bottom Navbar Styling --- */
.navbar.bottom {
  display: flex;
  justify-content: center; /* Centers links for the footer */
  box-shadow: var(
    --shadow-navbar-bottom-inset
  ); /* Violet inset shadow for bottom edge style */
}

.navbar.bottom .navbar__link {
  float: none;
}

/* Applies the violet glow to the back-to-top button hover state (only in the bottom nav) */
.navbar.bottom .navbar__link.active:hover {
  background-color: var(--sys-color-primary);
  cursor: pointer;
  box-shadow: var(--glow-accent-strong-inset);
}

/* Style for the currently active link in the TOP navbar only */
.navbar:not(.bottom) .navbar__link.active {
  background-color: var(
    --sys-color-primary
  ); /* Light background to visually separate */
  color: var(--sys-color-on-primary);

  /* Sets the approved 6px top radius */
  border-radius: 6px 6px 0 0;
  position: relative;
  z-index: 2; /* Ensures it sits above any other elements in the stack */

  /* Ensure the bottom edge is perfectly square to sit atop the dark navbar */
  border-bottom-left-radius: 0;
  border-bottom-right-radius: 0;
}

/* ================================================= */
/* === 3.1. INVERTED BORDER RADIUS FIX (Quarter Circle Overlay) === */
/* ================================================= */

/* --- LEFT SIDE (Active link on the far left, like Home) --- */
/* Target the spacer to place the inverted corner next to the link */
.navbar__spacer-right::after {
  content: " ";
  position: absolute;
  width: 16px;
  height: 16px;
  border-radius: 0 0 100vw 0;

  bottom: -13px;
  right: 0px;

  background-color: var(--sys-color-on-surface);
  box-shadow: 5px 5px 0 5px var(--sys-color-primary);

  z-index: 1000;
}

/* The spacer's pseudo-element should only appear if the link NEXT to it is active */
.navbar__spacer-right + .navbar__link--bracket-right.active::after {
  /* This rule is now REQUIRED to activate the spacer's pseudo-element only for the Home page */
  box-shadow: 5px 5px 0 5px var(--sys-color-surface-variant);
  /* The color is set by the active link's background, which is .navbar a.active */
}

/* Style the Link to the LEFT of the active tab (e.g., "About" for "Projects") */
.navbar .navbar__link--bracket-left.navbar__link::after {
  content: " ";
  position: absolute;
  /* Shape size matches padding/font metrics for best visual fit */
  width: 16px;
  height: 16px;
  /* Creates the inverted top-right corner radius (quarter circle cutout) */
  border-radius: 0 0 100vw 0;

  /* Positioned precisely at the bottom-right corner of the link */
  bottom: 0px;
  right: 0px;

  /* The element itself is the dark nav color (to cover the dark nav bar) */
  background-color: var(--sys-color-on-surface);

  /* The box-shadow is the light active background color, creating the 'cut-out' illusion */
  box-shadow: 5px 5px 0 5px var(--sys-color-primary);

  z-index: 1000; /* Sits below the link's text/content (z-index 1001), but above the main dark nav bar */
}

/* FIX: Seamless Hover Transition for Left Bracket */
.navbar .navbar__link.navbar__link--bracket-left:hover::after {
  /* Background uses low opacity green to create a subtle blend over the adjacent light active link corner. 
     This resolves the light corner "leak" issue during the hover transition. */
  background-color: var(--sys-color-primary-low-opacity);

  /* Box-shadow remains the light color to maintain the illusion of the cut-out corner. */
  box-shadow: 5px 5px 0 5px var(--sys-color-primary);
}

/* Style the Link to the RIGHT of the active tab (e.g., "GitHub" for "Projects") */
.navbar .navbar__link--bracket-right.navbar__link::after {
  content: " ";
  position: absolute;
  width: 16px;
  height: 16px;
  /* Creates the inverted top-left corner radius (quarter circle cutout) */
  border-radius: 0 0 0 100vw;

  /* Positioned precisely at the bottom-left corner of the link */
  bottom: 0px;
  left: 0px;

  /* The element itself is the dark nav color (to cover the dark nav bar) */
  background-color: var(--sys-color-on-surface);

  /* The box-shadow is the light active background color, creating the 'cut-out' illusion */
  box-shadow: -5px 5px 0 5px var(--sys-color-primary);

  z-index: 1000;
}

/* FIX: Seamless Hover Transition for Right Bracket */
.navbar .navbar__link.navbar__link--bracket-right:hover::after {
  /* Background uses low opacity green to create a subtle blend over the adjacent light active link corner. */
  background-color: var(--sys-color-primary-low-opacity);

  /* Box-shadow remains the light color to maintain the illusion of the cut-out corner. */
  box-shadow: -5px 5px 0 5px var(--sys-color-primary);
}
/* ================================================= */
/* === 4. HERO PITCH STYLING === */
/* ================================================= */

/* ================================================= */
/* === 5. BUTTON STYLING (Used on Home/Projects) === */
/* ================================================= */

/* --- 1. BASE BUTTON CLASS (Ensures Consistency) --- */
.button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.8rem 1.6rem;

  /* Standardizing the Corner Radius */
  border-radius: 0.5rem;

  font-family: inherit;
  font-weight: 600;
  font-size: 1rem;
  text-decoration: none;
  border: none;
  cursor: pointer;

  /* Premium Motion Logic */
  transition: background-color 200ms ease-in-out, transform 150ms ease-in-out,
    box-shadow 200ms ease-in-out, opacity 250ms ease;
}

/* --- 2. PRIMARY ACTION (Send Message / Portfolio) --- */
.button--primary {
  background-color: var(--sys-color-primary);
  color: var(--sys-color-on-primary);
}

/* PRIMARY: The Brand Glow */
.button--primary:hover:not(:disabled) {
  transform: translateY(-2px);
  background-color: var(--sys-color-primary);
  /* Replacing the grey shadow with a magenta 'brand glow' */
  /* Using the RGB variable for the glow allows for a soft, professional spread */
  box-shadow: 0 4px 15px rgba(var(--sys-color-accent-rgb), 0.4);
}

/* --- 3. TONAL ACTION (Secondary / Case Studies) --- */
.button--tonal {
  background-color: var(--sys-color-primary-container);
  color: var(--sys-color-on-primary-container);
}

.button--tonal:hover:not(:disabled) {
  transform: translateY(-2px);
  background-color: rgba(var(--sys-color-primary-rgb), 0.2);
}

/* --- 4. THE "PRO" DISABLED STATE --- */
.button:disabled {
  opacity: 0.45;
  cursor: not-allowed;
  pointer-events: none; /* Prevents hover/click logic */
  filter: grayscale(0.4); /* Mutes the brand color slightly */
  transform: none; /* Ensures it doesn't "lift" on hover */
}

/* --- 5. ACCESSIBILITY: THE FOCUS HALO --- */
.button:focus-visible {
  outline: 2px solid var(--sys-color-primary);
  outline-offset: 2px;
  box-shadow: var(--sys-color-focus-halo);
}

/* Style the button grouping container */
.button-group {
  margin-top: 2rem;
  display: flex;
  justify-content: center;
  gap: 1rem; /* Space between buttons */
}

/* ================================================= */
/* === 5. PORTFOLIO ROWS (Zig-Zag Layout) === */
/* ================================================= */

/* Centers the portfolio content on the page */
.project-container {
  max-width: 75rem;
  margin: 0 auto;
}

/* Defines the flexible structure for each project row */
.project-row {
  display: flex;
  align-items: center;
  padding: 3.75rem 1.25rem;
}

/* FIX: Rounds the top corners of the first project row for a continuous design look */
.first-project-row {
  border-top-left-radius: 0.5rem;
  border-top-right-radius: 0.5rem;
}

/* Reverses the order of columns for the zig-zag effect */
.project-row.reverse {
  flex-direction: row-reverse;
}

/* Alternating row backgrounds for visual separation */
.project-row:nth-of-type(odd) {
  background-color: var(--sys-color-surface-variant);
}

.project-row:nth-of-type(even) {
  background-color: var(--sys-color-surface);
}

/* Styling for the image column */
.project-row__image {
  flex: 1;
  max-width: 50%;
  display: flex;
  align-content: center;
  justify-content: center;
}

.project-row__image img {
  max-width: 100%;
  height: auto;
  border-radius: 0.5rem;
  /* Applies subtle shadow and the brand-specific violet accent glow */
  box-shadow: var(--shadow-subtle), var(--glow-accent-subtle);
}

/* Styling for the text column */
.project-row__text {
  flex: 1;
  max-width: 50%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 1.25rem;
}

.project-row__text h1,
h2 {
  margin-bottom: 1rem;
  text-align: center;
  max-width: 26ch;
}

.project-row__text p {
  font-size: 1.125rem;
  line-height: 1.5;
  max-width: 45ch;
}

.project-row__text figure {
  margin: 0 auto;
  width: fit-content;
}

.project-row__text blockquote {
  font-family: var(--font-body);
  font-weight: 500;
  font-style: italic;
  font-size: 1.25em;
  color: var(--sys-color-on-surface);
  border-left: solid 0.1rem var(--sys-color-accent);
  background-color: var(--sys-color-primary-container);
  padding: 1.5rem;
  border-radius: 0.5rem;
  margin: 1.5rem 0;
  max-width: 400px;
  /* Applies subtle shadow and the newly added subtle violet inset glow for style */
  box-shadow: var(--shadow-subtle), var(--glow-accent-subtle-inset);
}

.project-row__text figcaption {
  font-size: 1em;
  text-align: right;
  color: var(--sys-color-primary);
  margin-top: 0.5em;
  margin-right: 1rem;
}

/* ================================================= */
/* === 6. SLIDESHOW STYLING === */
/* ================================================= */

.slideshow {
  max-width: 500px; /* As requested */
  margin: 0 auto;
  position: relative;
}

.slideshow__slide {
  /* No position: absolute, no z-index, no visibility rules */
  display: none;
  opacity: 0;
  transition: opacity 0.6s ease-in-out;
}

.slideshow__slide.active {
  display: block;
  opacity: 1;
}

/* 2. Standard Corner Radius for Slideshow Images */
.slideshow__image {
  width: 100%;
  height: auto;
  max-height: 500px;
  object-fit: contain; /* Prevents clipping; shows the whole image */
  border-radius: 28px; /* All four corners now rounded */
  box-shadow: var(--sys-shadow-2);
  background-color: rgba(
    0,
    0,
    0,
    0.05
  ); /* Soft backdrop if image doesn't fill 500x500 */
}

/* Styling for the previous/next slideshow controls */
.slideshow__control--prev,
.slideshow__control--next {
  cursor: pointer;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translateY(-50%);
  width: auto;
  padding: 1rem;
  color: var(--sys-color-surface);
  font-weight: bold;
  font-size: 1.5rem;
  transition: 0.3s ease;
  user-select: none;
  background-color: var(--color-overlay-medium);
  z-index: 100;
}

/* 1. Anchors the RIGHT button to the center of the page, then pushes it out */
.slideshow__control--next {
  margin-left: 270px;
  border-radius: 0 3px 3px 0;
}

/* 2. Anchors the LEFT button to the center of the page, then pushes it out */
.slideshow__control--prev {
  margin-left: -312px;
  border-radius: 3px 0 0 3px;
}

.slideshow__control--prev:hover,
.slideshow__control--next:hover {
  background-color: var(--color-overlay-dark);
  /* Adds a strong violet glow on hover for interactive feedback */
  box-shadow: var(--glow-accent-strong);
}

#slideshow-container {
  flex-direction: column;
  align-items: center;
  position: relative;
}

.slideshow-title-box {
  text-align: center;
  padding: 1rem 0 2rem 0;
  color: var(--sys-color-on-surface);
}

#slide-title-link {
  text-decoration: none;
  color: inherit;
  display: block;
  cursor: pointer;
  transition: color 0.2s ease;
}

#slide-title {
  font-size: 1.75rem;
  font-weight: bold;
  margin: 0;
}

/* Changes the color and adds an underline on hover */
#slide-title-link:hover #slide-title {
  color: var(--sys-color-primary);
  text-decoration: underline;
  text-decoration-color: var(--sys-color-primary);
  text-decoration-thickness: 2px;
  text-underline-offset: 4px;
}

/* Styling for the slideshow dot container */
.slideshow__dots {
  text-align: center; /* Center the dot elements */
  padding: 1rem 0;
}

/* Styling for the individual dot element */
.slideshow__dot {
  /* Create the circle shape */
  height: 15px;
  width: 15px;
  margin: 0 5px;
  background-color: var(--sys-color-outline); /* Light gray background */
  border-radius: 50%; /* Makes it a circle */

  /* Layout and Interaction */
  display: inline-block; /* Allows them to sit side-by-side */
  transition: background-color 0.6s ease;
  cursor: pointer;
}

/* Active State: The dot corresponding to the current slide */
.slideshow__dot.active {
  background-color: var(--sys-color-primary); /* Use your primary color */
}

/* Hover State: Provides feedback when mousing over an inactive dot */
.slideshow__dot:hover:not(.active) {
  background-color: #9c27b0; /* Your Violet Accent */
  cursor: pointer;
  transform: scale(1.2);
  transition: all 0.2s ease;
}

/* ================================================= */
/* === 7. CONTACT FORM & MODAL STYLING === */
/* ================================================= */

.contact-modal__form h2 {
  /* This rule is highly specific, targeting only the H2 inside the form.
     It overrides the max-width: 26ch restriction from the .portfolio-text-column rule 
     by forcing the title to use the full width of the form container. */
  max-width: 100%;
  /* Also ensure text alignment is centered */
  text-align: center;
}

form {
  border-radius: 0.3125rem;
  background-color: var(--sys-color-surface-variant);
  padding: 0.625rem;
  /* Applies general subtle shadow and violet accent glow to the form container */
  box-shadow: var(--shadow-subtle), var(--glow-accent-subtle);
  max-width: 90vw;
  margin: 0 auto;
}

/* --- FORM INPUTS --- */
input[type="text"],
input[type="email"],
textarea {
  width: 100%;
  padding: 0.75rem;
  border: 1px solid var(--sys-color-outline); /* Use outline for default */
  border-radius: 0.5rem; /* Standardized radius */
  box-sizing: border-box;
  margin-top: 0.375rem;
  margin-bottom: 1rem;
  font-family: inherit;
  font-size: 1rem;
  background-color: var(--sys-color-surface);
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

/* Focused State: Swaps outline for Brand Glow */
input[type="text"]:focus,
input[type="email"]:focus,
textarea:focus {
  border-color: var(--sys-color-primary);
  box-shadow: var(--glow-primary);
  outline: none;
}

/* --- THE MODAL SUBMIT BUTTON --- */
/* We use the specific class ONLY for layout/width, letting .button handle the looks */
.contact-modal__button--submit {
  width: 100%;
  margin-top: 1rem;
  /* All other styles (color, radius, hover) come from .button and .button--primary */
}

/* Ensure the disabled state works specifically for this button */
.contact-modal__button--submit:disabled {
  opacity: 0.45;
  cursor: not-allowed;
  pointer-events: none;
  filter: grayscale(0.4);
}

.contact-modal {
  /* This creates the dark overlay */
  display: flex; /* Changed from 'block' to 'flex' */
  align-items: center; /* Vertical centering */
  justify-content: center; /* Horizontal centering */

  position: fixed;
  z-index: 2000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;

  /* Use your system-variable overlay or a semi-transparent black */
  background-color: rgba(0, 0, 0, 0.7);

  /* Ensure scrolling happens inside the modal if it's too tall */
  overflow-y: auto;
}

/* --- MODAL CONTAINER REFINEMENT --- */
.contact-modal__content {
  position: relative;
  background-color: var(--sys-color-surface);
  margin: 5% auto;
  padding: 2rem;
  border-radius: 0.8rem; /* Slightly softer corners for the modal */
  border: 1px solid var(--sys-color-outline);
  width: 90%;
  max-width: 500px; /* Prevents modal from getting too wide on desktop */
  box-shadow: var(--shadow-modal);
  animation: modal-open-anim 0.4s ease-out;
}

/* Keyframes for the modal open animation (slide down and fade in) */
@keyframes modal-open-anim {
  from {
    opacity: 0;
    transform: translateY(-50px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Applies a strong violet inset glow to modal buttons on hover */
.contact-modal__form .contact-modal__button--submit:hover {
  box-shadow: var(--glow-accent-strong-inset);
}

/* Close Contact modal Icon Styles */
.contact-modal__close-icon {
  position: absolute;
  top: 5px; /* Adjust vertical position */
  right: 5px; /* Adjust horizontal position */
  background: none;
  border: none;
  font-size: 22px; /* Larger size for better tap target */
  color: var(--sys-color-on-surface);
  cursor: pointer;
  padding: 5px;
  line-height: 1;
  /* CORRECTED: Only transition the color property */
  transition: color 0.2s ease;
  z-index: 10;
}

.contact-modal__close-icon:hover {
  /* Clear hover feedback: change to accent violet */
  color: var(--sys-color-accent);
  /* Removed: transform: scale(1.1); */
}

/* ================================================= */
/* === 8. RESPONSIVE MEDIA QUERIES === */
/* ================================================= */

/* --- Desktop Styles (min-width: 1201px) --- */
@media (min-width: 1201px) {
  .project-container {
    position: relative;
    max-width: 1200px;
    margin: 0 auto;
  }

  /* Creates a subtle radial gradient background effect for large screens */
  .project-container::before {
    content: "";
    position: fixed; /* FIXED: Keeps it from stretching/tiling as you scroll */
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: -1;
    background-image: radial-gradient(
      ellipse at 50% 30%,
      var(--sys-color-primary) 0%,
      var(--sys-color-primary) 45%,
      var(--sys-color-surface-variant) 100%
    );
    background-repeat: no-repeat;
    background-size: cover; /* Ensures it fills the screen without repeating */
  }
}

/* --- Tablet/Mobile Styles (max-width: 768px) --- */
@media (max-width: 768px) {
  /* 1. LAYOUT: Stacks the portfolio image and text columns vertically */
  .project-row,
  .project-row.reverse {
    flex-direction: column;
    gap: 20px;
  }

  .project-row__image,
  .project-row__text {
    max-width: 100%;
  }

  /* 2. SLIDESHOW FIX: Ensures controls are visible on small screens by repositioning them */
  .slideshow {
    max-width: 95vw;
  }

  .slideshow__control--prev,
  .slideshow__control--next {
    /* CRITICAL FIX: These lines wipe out conflicting desktop rules */
    left: auto; /* Wipes out the desktop's left: 50% */
    right: auto; /* Wipes out potential right conflicts */
    margin-left: 0; /* Wipes out the large desktop pixel offsets (-312px, 270px) */
    margin-top: -120px; /* Centers button vertically (Half of estimated button height) */
    /* Mobile-specific padding/sizing */
    padding: 0.5rem 0.75rem;
  }

  .slideshow__control--prev {
    left: 0.25rem; /* Pushes button to the left edge of the responsive container */
    border-radius: 0 3px 3px 0;
  }

  .slideshow__control--next {
    right: 0.25rem; /* Pushes button to the right edge of the responsive container */
    border-radius: 3px 0 0 3px;
  }

  /* ================================================= */
  /* === MOBILE NAVIGATION (Hamburger Menu) === */
  /* ================================================= */

  /* Resets navbar to block flow for mobile layout */
  .navbar {
    display: block;
    height: auto;
    /* FIX: Hides any content that overflows the navbar's boundaries, 
     preventing scrollbars from the transform: scale(1.1) hover effect. */
    overflow: hidden;
  }

  /* Styles the hamburger/X icon, pinned to the top right */
  .navbar .navbar__toggle {
    display: block;
    padding: 1rem;
    color: var(--sys-color-accent);
    float: right;
    order: 2;
    z-index: 1100;
    text-decoration: none;
    cursor: pointer;
    /* CORRECTED: Only transition the color property */
    transition: color 0.2s ease;
  }

  /* Styles the active page name which floats left, opposite the icon */
  .navbar:not(.responsive) .active-page-name {
    display: block;
    color: var(--sys-color-surface);
    font-weight: bold;
    padding: 1rem;
    float: left;
    order: 1;
  }

  /* Menu links container is hidden by default in mobile view */
  .navbar__links {
    display: none;
    width: 100%;
    clear: both; /* Ensures the stacked links fall below the floated header elements */
  }

  /* Menu links container SHOWS when the 'responsive' class is toggled (menu open) */
  .navbar.responsive .navbar__links {
    display: flex;
    flex-direction: column;
    width: 100%;
  }

  /* Resets link flow for stacking in the mobile menu */
  .navbar__link {
    float: none;
    display: block;
    text-align: left;
  }

  /* Switches the Hamburger icon to an X icon when the menu is open */
  .navbar.responsive .navbar__toggle i {
    display: none;
  }

  /* Corrected hover effect: Simple Color Change (affects both hamburger and 'X') */
  .navbar .navbar__toggle:hover {
    /* No heavy background change, no scrollbars */
    background-color: transparent;
    /* Change icon color to white for high contrast on the dark background */
    color: var(--sys-color-surface);
    /* Removed: transform: scale(1.1); */
    box-shadow: none;
    text-decoration: none;
  }

  /* Switches the Hamburger icon to an X icon when the menu is open */
  .navbar.responsive .navbar__toggle::before {
    content: "\f00d"; /* Font Awesome unicode for fa-times (X) */
    font-family: "FontAwesome";
    color: var(--sys-color-accent);
    font-size: 1.125rem;
    text-decoration: none;
    cursor: pointer;
    /* NEW: Add transition so the hover effect is smooth */
    transition: color 0.2s ease;
  }

  /* NEW: Apply the hover color directly to the visible 'X' pseudo-element */
  .navbar.responsive .navbar__toggle:hover::before {
    color: var(--sys-color-surface);
  }

  /* Generic active link styling for mobile, no corner radius required */
  .navbar__link.active {
    background-color: var(--sys-color-on-surface);
    color: var(--sys-color-surface-variant);
  }

  .navbar.responsive .navbar__link.active {
    background-color: var(--sys-color-on-surface);
    color: var(--sys-color-surface-variant);
  }

  /* Hides the current page title when the full menu is open to simplify the top bar */
  .navbar.responsive .active-page-name {
    display: none;
  }

  /* NEW FIX: Hides the desktop inverted corner pseudo-elements 
   so they do not interfere with the stacked mobile menu links. */
  .navbar .navbar__link--bracket-left.navbar__link::after,
  .navbar .navbar__link--bracket-right.navbar__link::after,
  .navbar__spacer-right::after {
    content: none;
  }
}

/* --- Desktop (min-width: 769px) --- */
/* UPDATED: Changed min-width from 768px to 769px to resolve the conflict at the 768px breakpoint. */
@media screen and (min-width: 769px) {
  .slideshow__control--prev,
  .slideshow__control--next {
    transform: translateY(-160%);
  }
  /* On desktop, the hamburger icon is not needed */
  .navbar__toggle {
    display: none;
  }

  /* On desktop, show the nav links by default and use flexbox for proper horizontal positioning */
  .navbar__links {
    display: flex;
    justify-content: flex-end;
    align-items: center;
    flex-grow: 1;
  }

  /* NEW LOCATION: This rule ONLY applies on desktop (769px+)
     It overrides the border-left set in the base style to create the zig-zag border effect. */
  .project-row.reverse .project-row__text blockquote {
    border-left: none;
    border-right: solid 0.1rem var(--sys-color-accent);
    background-color: var(--sys-color-surface);
  }

  /* Desktop font sizes for H1 and H2 */
  h1 {
    font-size: 2.5rem;
  }

  h2 {
    font-size: 1.8rem;
  }
}

/* Accessibility: Visually hidden but readable by screen readers */
.sr-only {
  border: 0;
  clip: rect(0 0 0 0);
  clip-path: inset(50%);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  white-space: nowrap;
  width: 1px;
}

/* refactor v2 */

/* --- FEATURE BLOCK SKELETON (FINAL POLISH) --- */

/* --- HERO REFINEMENT --- */
/* --- NEW HERO SYSTEM --- */
.hero {
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 40vh; /* Gives the Hero some vertical breathing room */
  padding: 5rem 1.25rem 2rem 1.25rem; /* Extra top padding for the fixed Navbar */
  text-align: center;
}

.hero__content {
  max-width: 60ch; /* Optimal reading width */
}

.hero h1 {
  font-size: 3.25rem; /* Premium scale */
  color: var(
    --sys-color-on-primary
  ); /* White/Off-white on the green gradient */
  margin-bottom: 1.5rem;
  font-family: var(--font-display);
}

.hero p {
  font-size: 1.25rem; /* 20px - The dominant body text */
  color: var(--sys-color-on-primary);
  line-height: 1.5;
  font-weight: 400;
}

/* 1. Breathing room under Hero Text */
.hero--slideshow p {
  margin-bottom: 2.5rem; /* Pushes the slideshow away from the intro text */
}

/* About Page Specific H1 Adjustment */
#about-intro h1 {
  font-size: 3.25rem;
  color: var(--sys-color-on-surface);
  margin-bottom: 1rem;
}

.slideshow {
  max-width: 500px; /* Constrain width */
  margin: 0 auto;
  position: relative;
}

.slideshow__image {
  width: 100%;
  height: auto;
  object-fit: contain; /* Shows full screenshot without clipping */
  border-radius: 28px; /* Rounded on all four corners */
  box-shadow: var(--sys-shadow-1);
  display: block;
}

/* 1. The Title Box: Making it look like a floating "M3" Badge */
/* 3. Title Box: Violet Affordance */
.slideshow-title-box {
  margin-top: 2rem;
  background-color: var(--sys-color-surface);
  padding: 0.75rem 1.5rem;
  border-radius: 100px;
  display: inline-flex;
  align-items: center;
  gap: 10px;
  /* The "Violet Energy" logic */
  box-shadow: 0 4px 15px rgba(156, 39, 176, 0.2);
  transition: all 0.3s ease;
}

.slideshow-title-box:hover {
  /* Stronger Violet glow on hover to signal interactivity */
  box-shadow: 0 6px 20px rgba(156, 39, 176, 0.4);
  transform: translateY(-2px);
}

#slide-title {
  color: var(--sys-color-primary); /* Dark Pine Green */
  margin: 0;
  font-family: "Poppins", sans-serif;
  font-size: 1.1rem;
}

/* 2. Navigation Controls: Making them visible over the gradient */
.slideshow__control--prev,
.slideshow__control--next {
  position: absolute;
  top: 50%; /* Center relative to the 500px container */
  transform: translateY(-50%);
  z-index: 10;
  cursor: pointer;
  /* Visual styling */
  background: rgba(255, 255, 255, 0.2);
  backdrop-filter: blur(4px);
  border-radius: 50%;
  width: 44px;
  height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  transition: all 0.2s ease;
}

/* The Chevron Signifier */
.slideshow-title-box .fa-chevron-right {
  color: #9c27b0; /* Violet accent */
  font-size: 0.9rem;
}

/* Position arrows outside the 500px box for air */
.slideshow__control--prev {
  left: -60px;
}
.slideshow__control--next {
  right: -60px;
}

.slideshow__control--prev:hover,
.slideshow__control--next:hover {
  background-color: var(--sys-color-surface);
  color: var(--sys-color-primary);
}

/* 3. The Dots: Material 3 Active State */
.slideshow__dot {
  background-color: rgba(255, 255, 255, 0.4);
  width: 12px;
  height: 12px;
}

.slideshow__dot.active {
  background-color: white;
  width: 24px; /* Pill shape for active dot */
  border-radius: 6px;
}

/* --- ROW 01 SPECIFIC BONES --- */

/* The 'Bridge' to the Hero */
.feature-block--first {
  margin-top: 18px; /* Matches your 'Sweet Spot' gutter */
  border-radius: 2rem 2rem 0 0; /* Rounded shoulders */
}

/* Intro Paragraph Styling */
.feature-block__intro-text {
  font-size: 1.125rem; /* 18px to match quote size */
  line-height: 1.6;
  color: var(--sys-color-on-surface);
  max-width: 45ch; /* Comfortable reading width for paragraphs */
  margin-bottom: 1.5rem;
}

/* Sub-header for the buttons */
.feature-block__jump-link {
  font-size: 1.25rem;
  color: var(--sys-color-primary); /* Dark Pine Green */
  margin-bottom: 1rem;
  font-family: "Poppins", sans-serif;
}

/* Ensure the button group stays centered in the column */
.button-group {
  display: flex;
  gap: 1rem;
  justify-content: center;
}

.feature-block {
  background-color: var(--sys-color-surface);
  padding: 4rem 1.25rem;
  margin-bottom: 18px; /* Tighter 32px Gutter Splash */
}

.feature-block__grid {
  display: flex;
  flex-direction: column;
  gap: 2rem;
  max-width: 1200px;
  margin: 0 auto;
  align-items: center; /* Center for mobile */
}

/* 1. IMAGE: Forced 500x500 Square */
.feature-block__image {
  width: 500px;
  height: 500px;
  object-fit: cover;
  border-radius: 8px;
  box-shadow: 0 0 15px rgba(255, 0, 255, 0.3); /* Violet Glow */
}

/* --- ROW 2 COLOR SWAP & BORDER LOGIC --- */

.feature-block--alt {
  background-color: var(
    --sys-color-surface-variant
  ) !important; /* Forces the Light Pine */
}

/* Swaps Quote to White background when on Light Pine sections */
.feature-block__quote-box--on-alt {
  background-color: var(--sys-color-surface) !important;
  border-left: none !important;
  border-right: 2px solid var(--sys-color-accent); /* Border closest to image */
}

/* Ensure Author is ALWAYS right-aligned to the 400px container */
.feature-block__author {
  text-align: right !important;
  width: 100%;
}

/* 2. TITLE: Refined Scale and Color */
.feature-block__title--column {
  font-size: 1.8rem; /* 28.8px */
  max-width: 26ch; /* Typographic comfort width */
  color: var(--sys-color-on-surface); /* Near Black / Charcoal */
  margin-bottom: 2rem;
  font-family: "Poppins", sans-serif;
  line-height: 1.3;
  text-align: center;
}

/* Center the content vertically against the image */
.feature-block__content {
  display: flex;
  flex-direction: column;
  justify-content: center; /* Vertical Center */
  align-items: center; /* Horizontal Center */
}

/* 3. QUOTE CONTAINER: Forced 400px Composition */
.feature-block__quote-container {
  width: 400px;
  max-width: 100%;
}

.feature-block__quote-box {
  background-color: var(--sys-color-surface-variant);
  padding: 1.5rem; /* Restored to 24px */
  border-left: 2px solid var(--sys-color-accent);
  border-radius: 8px;
  font-size: 1.125rem; /* 18px */
  font-style: italic;
  margin: 0;
  width: 100%;
  word-wrap: break-word;
  text-align: center;
}

/* 4. AUTHOR: Aligned to 400px edge */
.feature-block__author {
  text-align: right;
  margin-top: 1rem; /* M3 Standard Margin */
  font-size: 1rem; /* 16px */
  color: var(--sys-color-primary); /* Dark Pine Green */
  font-weight: 400;
}

/* DESKTOP PIVOT */
@media screen and (min-width: 1025px) {
  .feature-block__grid {
    flex-direction: row;
    justify-content: center;
    gap: 5rem; /* Increased gap to balance the 500px image */
  }
}

/* MOBILE RESPONSIVENESS */
@media screen and (max-width: 600px) {
  .feature-block__image {
    width: 320px; /* Scale down for mobile while keeping square */
    height: 320px;
  }
  .feature-block__quote-container {
    width: 100%;
  }
}

@media screen and (min-width: 1025px) {
  .feature-block__grid {
    flex-direction: row;
    justify-content: center;
    gap: 5rem;
  }

  /* ADD THIS LINE HERE: */
  .feature-block__grid--reverse {
    flex-direction: row-reverse;
  }
}
