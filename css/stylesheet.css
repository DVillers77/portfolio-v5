/* ================================================= */
/* === 1. GLOBAL ENGINE: Reset & Variables       === */
/* ================================================= */
html {
  -webkit-text-size-adjust: 100%;
  -moz-text-size-adjust: 100%;
  text-size-adjust: 100%;
}
/* The "Stability" Reset */
*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

:root {
  /* --- 1. BASE PRIMITIVES (The Ingredients) --- */
  --color-base-pine: 1, 98, 75;
  --color-base-violet: 156, 39, 176;
  --color-base-magenta: 255, 0, 255;
  --color-base-white: 255, 255, 255;
  --color-base-charcoal: 51, 51, 51;
  --color-base-black: 10, 10, 10;
  --color-base-error: 176, 0, 32;

  /* --- 2. SEMANTIC TOKENS (The Intent) --- */
  --sys-color-primary-rgb: var(--color-base-pine);      /* Brand Core */
  --sys-color-secondary-rgb: var(--color-base-violet);  /* Atmosphere/Feel */
  --sys-color-tertiary-rgb: var(--color-base-magenta);  /* Interaction/Action */
  --sys-color-surface-rgb: var(--color-base-white);
  --sys-color-on-surface-rgb: var(--color-base-charcoal);

  /* --- 3. DERIVED VALUES --- */
  --sys-color-primary: rgb(var(--sys-color-primary-rgb));
  --sys-color-secondary: rgb(var(--sys-color-secondary-rgb));
  --sys-color-tertiary: rgb(var(--sys-color-tertiary-rgb));
  --sys-color-surface: rgb(var(--sys-color-surface-rgb));
  
  --sys-color-on-surface: rgb(var(--sys-color-on-surface-rgb));
  --sys-color-on-surface-emphasis: rgb(var(--color-base-black));
  
  /* Tonal Containers */
  --sys-color-primary-container: rgba(var(--sys-color-primary-rgb), 0.12);
  --sys-color-on-primary-container: var(--sys-color-primary);
  --sys-color-surface-variant: #f0f7f5; /* Light Pine Tint - Exception for subtle variant */

  /* Text Colors */
  --sys-color-on-primary: var(--sys-color-surface);
  
  /* Interaction & UI */
  --sys-color-outline: #555555;
  --sys-color-focus-halo: rgba(var(--sys-color-primary-rgb), 0.4);
  --sys-color-error: rgb(var(--color-base-error));

  /* --- 3. DEPTH & EFFECTS --- */
  /* Re-mapped to maintain Violet/Magenta semantics if needed, or keep as is if strictly defined in old var names 
     Old: --sys-shadow-navbar-accent: inset 0 -4px 6px -4px var(--sys-color-accent);
     New Mapping: accent -> secondary (Violet) or tertiary (Magenta)? 
     User said: "Interactive elements use --sys-color-tertiary." 
     User said: "Violet (Secondary) to Magenta (Tertiary) on hover".
     "Violet (Brand) to Magenta (Action)".
     Let's map "accent" to tertiary (Magenta) for now as that was the old "accent".
  */
  --sys-shadow-navbar-accent: inset 0 -4px 6px -4px var(--sys-color-secondary); /* Navbar Line: Violet (Secondary) per "Violet (Brand)"? Or Magenta? 
                                                                                   Detailed notes said "Violet line stays", so Secondary. */

  --glow-primary: 0 0 0.3125rem var(--sys-color-primary);
  --glow-accent-strong: 0 0 10px 0 var(--sys-color-tertiary);      /* Magenta */
  --glow-accent-subtle: 0 0 10px 0 rgba(var(--sys-color-secondary-rgb), 0.4); /* Violet subtle? Or Magenta? 
                                                                              Old was accent (magenta). 
                                                                              Let's use Secondary (Violet) for subtle atmosphere. */

  --sys-glow-accent-inset: inset 0 0 10px 0 rgba(var(--sys-color-tertiary-rgb), 0.4);
  --sys-glow-primary-inset: inset 0 0 0.3125rem var(--sys-color-primary);

  --shadow-subtle: 0 0.25rem 0.5rem rgba(0, 0, 0, 0.2);
  --shadow-modal: 0 4px 8px 0 rgba(0, 0, 0, 0.2),
    0 6px 20px 0 rgba(0, 0, 0, 0.19);

  /* New Environmental Halo System (Iteration 4 - Electric Core) */
  /* 1. RIM: For images on dark backgrounds (Hero/Slideshow) - 1.5px White Rim (0.8 opacity) */
  --sys-shadow-halo-rim: 0 0 0 1.5px rgba(255, 255, 255, 0.8), 0 4px 15px rgba(0, 0, 0, 0.5), 0 0 15px rgba(var(--sys-color-secondary-rgb), 0.75), 0 0 50px rgba(var(--sys-color-secondary-rgb), 0.3);

  /* 2. STANDARD: For images on White Blocks - Lift focus */
  --sys-shadow-halo-standard: 0 0 0 1.5px rgba(255, 255, 255, 0.8), 0 10px 30px rgba(0, 0, 0, 0.15), 0 0 15px rgba(var(--sys-color-secondary-rgb), 0.7), 0 0 50px rgba(var(--sys-color-secondary-rgb), 0.2);

  /* 3. ALT: For images on Pine Blocks - Tinted shadow for blending */
  --sys-shadow-halo-alt: 0 0 0 1.5px rgba(255, 255, 255, 0.8), 0 10px 30px rgba(var(--sys-color-primary-rgb), 0.3), 0 0 15px rgba(var(--sys-color-secondary-rgb), 0.8), 0 0 50px rgba(var(--sys-color-secondary-rgb), 0.25);

  /* --- FLUID GRADIENT CONTROL --- */
  --nav-gradient-stop: 45vw;
  --navbar-shelf-height: 15px;

  /* --- GLOBAL FONTS & TYPE SCALE (M3) --- */
  --font-display: "Poppins", sans-serif;
  --font-body: "Inter", sans-serif;
  
  /* M3 Scale Variables */
  --font-size-display: 3.5rem;   /* H1 */
  --font-size-headline: 1.75rem; /* H2 */
  --font-size-title: 1.125rem;   /* H3 */
  --font-size-body: 1rem;        /* Body */
}

/* ================================================= */
/* === [V3] GLOBAL LAYOUT & ATMOSPHERE (UPDATED) === */
/* ================================================= */

body::before {
  content: "";
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  z-index: -1;
  background-image: radial-gradient(
    circle at 50% 30%,
    var(--sys-color-primary) 0,
    var(--sys-color-primary) var(--nav-gradient-stop),
    var(--sys-color-surface-variant) 85%
  );
  background-repeat: no-repeat;
  background-size: cover;
  transition: background-image 0.3s ease; /* Smooth transition when resizing */
}

/* For smaller screens, update the gradient stop to provide a minimum size 
   for the solid color area, preventing it from becoming too small. */
@media screen and (max-width: 809px) {
  :root {
    --nav-gradient-stop: calc(180px + 15vw);
  }
}
/* The 'Spine' of the site */
.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 1.25rem;
  width: 100%;
}

/* ================================================= */
/* === 2. NAVBAR: The "Chrome Tab" Architecture  === */
/* ================================================= */

.navbar {
  background-color: var(--sys-color-on-surface); /* Charcoal stays */
  display: flex;
  align-items: stretch; /* Pixel-Perfect Hover Heights */
  justify-content: space-between; /* Ensure logo/toggle/links spacing */
  position: sticky;
  top: 0;
  z-index: 1000;
  box-shadow: none; /* Removed for Gradient Border */
  /* Switched to Pseudo-Element for cleaner stacking */
  border: none !important;
  overflow: visible; /* Ensure pseudo-elements aren't clipped */
  
  /* MOBILE DEFAULT */
  flex-flow: row wrap; /* Allows Toggle to sit right of logo, links to break below */
  justify-content: space-between; /* Reserves space for Logo (Left) and Toggle (Right) */
  align-items: center;
}

/* THE ACCENT LINE (Top Nav) */
header > .navbar::before {
  content: "";
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 4px;
  background: linear-gradient(to right, transparent 5%, var(--sys-color-secondary) 15%, var(--sys-color-secondary) 85%, transparent 95%);
  z-index: 1001; /* High visibility, above background */
}

header > .navbar::after {
  content: "";
  position: absolute;
  top: 100%;
  left: 0;
  width: 100%;
  height: var(--navbar-shelf-height);
  z-index: -1; /* STACKING FIX: Ensure it sits behind the border */

  /* This creates a solid block for the first 12px, 
     then fades out over the last 6px */
  background: linear-gradient(
    to bottom,
    var(--sys-color-primary) 0%,
    var(--sys-color-primary) 12px,
    transparent 100%
  );

  z-index: -1;
  pointer-events: none;
}

/* 1. THE TOGGLE (Hamburger - VISIBLE BY DEFAULT) */
.navbar__toggle {
  display: block; /* Mobile Default */
  float: right;
  color: var(--sys-color-tertiary);
  padding: 14px 24px; /* Matches the vertical height of desktop links */
  font-size: 1.5rem;
  cursor: pointer;
  text-decoration: none;
  position: relative; /* Necessary for the magenta underline */
  transition: background-color 0.2s ease, color 0.2s ease;
  /* align-self: flex-end; */ /* Handled by justify-content: space-between in row layout */
  /* FORCE RIGHT ALIGNMENT in Flex Wrap Row */
  margin-left: auto;
  order: 2; /* Ensure it sits after the logo (order 0) */
}

/* Mimic the Desktop Navlink Hover */
.navbar__toggle:hover {
  background-color: #444; /* Charcoal shift */
  color: var(--sys-color-surface); /* Shifts icon to white for contrast */
}

/* The Magenta Line mimic */
.navbar__toggle:hover::after {
  content: "";
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  border-bottom: 3px solid var(--sys-color-tertiary); /* Magenta Signal */
}

/* 2. THE LINKS CONTAINER (Mobile: Collapsed/Hidden) */
.navbar__links {
  display: none; /* Hidden by default */
  flex-direction: column;
  width: 100%;
  padding-right: 0;
  order: 3; /* Ensures it breaks to the next line in the wrapped row */
}

/* OPEN STATE (JS toggles .responsive class on navbar) */
.navbar.responsive .navbar__links {
  display: flex;
}

/* Base Link Style: The "Hit-Box" */
.navbar__link {
  font-family: var(--font-body);
  /* Use clamp for fluid typography: 
     Min: 14px, Preferred: 1.1vw, Max: 17px */
  font-size: clamp(14px, 1.1vw, 17px);
  /* Reduce horizontal padding on tablets to keep the bar narrow */
  font-weight: 400;
  color: var(--sys-color-surface);
  text-decoration: none;

  /* MOBILE DEFAULT */
  width: 100%;
  padding: 14px 24px;
  display: block;
  transition: all 0.2s ease;
  position: relative;
  /* border-radius: 0; */
}

/* THE HOVER: Tonal shift + Magenta Pathway */
.navbar__link:hover:not(.active) {
  background-color: #444; /* Tonal highlight */
}

/* SYNC MAGENTA HIGHLIGHT: 4px thick */
.navbar__link:hover:not(.active)::after {
  content: "";
  position: absolute;
  bottom: 0px;
  left: 0;
  width: 100%;
  height: 4px; /* Matched to Accent Lines */
  background-color: var(--sys-color-tertiary);
  animation: slideIn 0.3s ease-out forwards;
  z-index: 1002; /* Above the 1001 accent line */
}

/* THE ACTIVE TAB: The 'Bridge' */
.navbar__link.active {
  background-color: var(--sys-color-primary); /* Dark Pine */
  color: white;
  border-radius: 0; /* Mobile Square */
  z-index: 1001;
  /* This margin-bottom pulls the tab down to cover the rail */
  margin-bottom: -3px;

  /* UX ADDITION: Remove interactivity from current page tab */
  cursor: default;
  pointer-events: none;
}

/* THE BRACKETS: Fixed Positioning (HIDDEN ON MOBILE) */
.navbar__link.active::before,
.navbar__link.active::after {
  content: "";
  position: absolute;
  bottom: 0;
  width: 20px;
  height: 20px;
  background-color: transparent;
  box-shadow: 0 10px 0 0 var(--sys-color-primary);
  pointer-events: none; /* Prevents brackets from being clickable */
  display: none; /* Mobile Default */
}

.navbar__link.active::before {
  left: -19px;
  border-bottom-right-radius: 19px;
}

.navbar__link.active::after {
  right: -19px;
  border-bottom-left-radius: 19px;
}


/* --- DESKTOP ENHANCEMENT (810px+) --- */
@media screen and (min-width: 810px) {
  .navbar {
    flex-direction: row;
    align-items: stretch;
    justify-content: space-between;
  }

  .navbar__toggle {
    display: none;
  }

  .navbar__links {
    display: flex;
    flex-direction: row;
    justify-content: flex-end; /* RIGHT ALIGNED */
    width: 100%;
    padding-right: 20px; /* Room for the bracket */
  }

  .navbar__link {
    width: auto;
    display: inline-block;
    padding: 14px clamp(12px, 1.5vw, 24px);
  }

  /* Desktop Active State (With Tabs & Brackets) */
  .navbar__link.active {
    border-radius: 12px 12px 0 0;
  }

  .navbar__link.active::before,
  .navbar__link.active::after {
    display: block;
  }
}

/* --- PRO DESKTOP ENHANCEMENT (1070px+) --- */
/* The "Ghost Button" Anchor */
@media screen and (min-width: 1070px) {
  header .navbar__link[href*='contact'], 
  header .navbar__link--contact-trigger {
    border: 2px solid var(--sys-color-secondary); /* Violet Border */
    border-radius: 0.5rem; /* Standard Button Shape */
    padding: 6px 20px; /* SLEEK PADDING */
    margin-left: 20px;
    align-self: center; /* Center in nav bar */
    margin-bottom: 0; /* Reset tab sit */
    z-index: 1002;
    transition: all 0.2s ease-in-out; /* Smooth transition */
    box-sizing: border-box; /* STABILITY FIX */
  }

  /* REPURPOSE ::after for HIT AREA (Invisible Overlay) */
  header .navbar__link[href*='contact']::after,
  header .navbar__link--contact-trigger::after {
    display: block;
    content: "";
    position: absolute;
    top: -10px;    /* Expands hit area up */
    bottom: -10px; /* ...and down to meet ~44px target */
    left: 0;
    right: 0;
    background-color: transparent; /* Invisible */
    height: auto; /* Override standard 4px height */
    width: auto; /* Override standard width */
    animation: none; /* Kill slideIn */
  }

  /* Solid Fill & Electric Glow on Hover - RESET DEFAULTS */
  header .navbar__link[href*='contact']:hover, 
  header .navbar__link--contact-trigger:hover {
    background-color: var(--sys-color-secondary);
    color: white; /* On-Secondary */
    box-shadow: 0 0 20px rgba(var(--sys-color-secondary-rgb), 0.6);
    text-decoration: none !important;
    border: 2px solid var(--sys-color-secondary); /* STABLE BORDER */
    /* border-bottom: none !important; REMOVED to prevent jump */
    /* border-top: 2px solid var(--sys-color-secondary); REMOVED to prevent jump */
  }
  
  /* Prevent Magenta Line OR Overline on Hover */
  header .navbar__link[href*='contact']:hover::after,
  header .navbar__link--contact-trigger:hover::after {
    display: block; /* Keep Hit Area active */
    background-color: transparent !important; /* No Magenta */
    height: auto; /* Maintain hit area height */
    bottom: -10px; /* Maintain hit area position */
    animation: none;
  }
}

/* ================================================= */
/* === [V3] REFACTORED: FEATURE BLOCK (ZIG-ZAG)  === */
/* ================================================= */

/* --- 1. THE BLOCK (Container) --- */
.feature-block {
  background-color: var(--sys-color-surface);
  padding: 4rem 1.25rem;
  margin-bottom: 18px; /* Tighter 18px Gutter Splash */
  width: 100%;
}

/* Modifiers for Block */
.feature-block--first {
  margin-top: 18px;
  border-radius: 2rem 2rem 0 0; /* Rounded shoulders */
}

.feature-block--alt {
  background-color: var(
    --sys-color-surface-variant
  ) !important; /* Force Light Pine */
}

/* --- 2. THE GRID (Flex Layout) --- */
/* --- 2. THE GRID (Flex Layout - Mobile First Stack) --- */
.feature-block__grid {
  display: flex;
  flex-direction: column; /* Mobile stack by default */
  gap: 2rem;
  max-width: 1200px;
  margin: 0 auto;
  align-items: center;
}

/* --- 3. MEDIA (Image Styling) --- */
/* --- UNIFIED MEDIA STYLING --- */
.feature-block__image {
  width: 100%;
  max-width: 500px; /* Limits size on desktop */
  aspect-ratio: 1 / 1; /* Forces the 1:1 ratio */
  object-fit: cover; /* Ensures image fills the square without stretching */
  border-radius: 8px;
  box-shadow: var(--sys-shadow-halo-standard);
  display: block;
  margin: 0 auto; /* Centers image if it's smaller than the container */
  order: 2; /* Image Second on Mobile */
  margin-bottom: 1.5rem;
}

/* Override for Alt Block (Light Pine) */
.feature-block--alt .feature-block__grid .feature-block__image {
  box-shadow: var(--sys-shadow-halo-alt) !important;
}

/* --- 4. CONTENT (Text & Typography) --- */
/* --- 4. CONTENT (Text & Typography) --- */
/* MOBILE DEFAULT: 'display: contents' allows children to interleave with the image via order */
.feature-block__content {
  display: contents;
}

.feature-block__title--column {
  font-size: var(--font-size-headline);
  max-width: 26ch;
  color: var(--sys-color-primary);
  margin-bottom: 2rem;
  font-family: "Poppins", sans-serif;
  line-height: 1.3;
  text-align: center;
  order: 1; /* Title First on Mobile */
}

.feature-block__intro-text {
  font-family: var(--font-body);
  font-size: 1.125rem;
  line-height: 1.6;
  max-width: 45ch;
  margin-bottom: 1.5rem;
  order: 3; /* Text Third on Mobile */
  text-align: center;
}

.feature-block__jump-link {
  font-size: 1.25rem;
  color: var(--sys-color-primary);
  margin-bottom: 1rem;
}

/* --- 5. QUOTES & AUTHORS --- */
.feature-block__quote-container {
  width: 400px;
  max-width: 100%;
}

.feature-block__quote-box {
  background-color: var(--sys-color-surface-variant);
  padding: 1.5rem;
  border-left: 4px solid var(--sys-color-secondary); /* Global Mobile Default */
  border-right: none;
  border-radius: 8px;
  font-size: 1.125rem;
  font-style: italic;
  width: 100%;
  text-align: center;
  order: 2; /* With Image */
}

.feature-block__quote-box--on-alt {
  background-color: var(--sys-color-surface) !important;
  /* Retain border-left: 4px from base class on mobile */
  border-right: none;
}

.feature-block__author {
  text-align: right;
  margin-top: 1rem;
  font-size: 1rem;
  color: var(--sys-color-primary);
  width: 100%;
}

/* --- 6. RESPONSIVE ENGINE --- */

/* UNIFIED MOBILE STACKING (1024px and below) */


/* Mobile Adjustments (600px-) */
@media screen and (max-width: 600px) {
  .feature-block__image {
    width: 100%;
  }
}

/* ================================================= */
/* === [V3] GLOBAL LAYOUT & WRAPPERS             === */
/* ================================================= */

/* 1. HERO COMPONENT */
.hero {
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 40vh;
  padding: 5rem 1.25rem 2rem 1.25rem;
  text-align: center;
}

.hero__content {
  position: relative; /* Secondary anchor */
  max-width: 65ch; /* Optimized for readability */
  margin: 0 auto;
}

.hero__title {
  font-family: var(--font-display);
  font-size: var(--font-size-display);
  color: var(--sys-color-surface);
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3); /* Optional: Adds a bit of 'pop' against the green */
  margin-bottom: 1rem;
  line-height: 1.1;
  font-weight: 700;
}

.hero__subtitle {
  font-family: var(--font-body);
  font-size: 1.25rem;
  color: rgba(var(--sys-color-surface-rgb), 0.9); /* Makes the subtitle soft white */
  max-width: 65ch; /* Restoring the readability limit */
  line-height: 1.5;
  margin-left: auto; /* Centering within the flex container */
  margin-right: auto;
  text-align: center;
  margin-bottom: 3rem;
}

/* 2. ACCESSIBILITY */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* ================================================= */
/* === [V4] REFACTORED: SLIDESHOW SYSTEM (BEM)   === */
/* ================================================= */

.slideshow {
  position: relative;
  width: 100%;
  max-width: 500px; /* Restores your standardized desktop width */
  margin: 0 auto;
  display: flex; /* Use flexbox for clean vertical stacking on mobile */
  flex-direction: column;
  align-items: center;
}

/* THE NEW ANCHOR */
.slideshow__positioner {
  position: relative;
  width: 100%;
  max-width: 500px;
}

/* 2. THE VIEWPORT: Forces the 500x500 standard */
.slideshow__viewport {
  position: relative; /* BECOMES THE ANCHOR for the controls */
  width: 100%;
  aspect-ratio: 1 / 1; /* Keeps it square */
  /* overflow: hidden; */ /* MOVED to the slide itself to unclip buttons */
  border-radius: 8px;
  background-color: #000;
  box-shadow: var(--sys-shadow-halo-rim);
  margin-bottom: 1.5rem;
}

.slideshow__slide {
  width: 100%;
  height: 100%;
  display: none;
  overflow: hidden; /* CLIPS the image content, not the controls */
  border-radius: 8px;
}

.slideshow__slide--active {
  display: block;
}

.slideshow__image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

/* --- 3. THE CONTROLS: Fluid & Universal --- */
.slideshow__control {
  position: absolute;
  /* 50% of the WIDTH of a square is the vertical center */
  top: 50%;
  transform: translateY(-50%);
  z-index: 20;
  width: 54px;
  height: 54px;
  background-color: rgba(0, 0, 0, 0.5);
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
  transition: all 0.2s ease;
  cursor: pointer;
}

/* Base position: Safe inside the image area */
.slideshow__control--prev {
  left: -27px;
}
.slideshow__control--next {
  right: -27px;
}

.slideshow__control:hover {
  background-color: #444;
  color: var(--sys-color-tertiary);
}

.slideshow__control:active {
  transform: translateY(-50%) scale(0.85);
  background-color: var(--sys-color-tertiary);
}

/* 4. THE PILL: Styling moved from ID to BEM Class */
.slideshow__pill {
  margin-bottom: 1.5rem;
  z-index: 20;
}

.slideshow__pill-link {
  display: inline-block;
  background-color: var(--sys-color-primary);
  color: white;
  padding: 0.8rem 1.6rem;
  border-radius: 100px;
  text-decoration: none;
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
  /* Restored your specific transition */
  transition: all 300ms ease;
}

/* Restored your specific hover effects */
.slideshow__pill-link:hover {
  background-color: #444;
  transform: translateY(-4px);
  box-shadow: 0 12px 24px rgba(var(--sys-color-tertiary-rgb), 0.4);
}

/* 5. THE DOTS */
.slideshow__dots {
  display: flex;
  justify-content: center; /* THIS CENTERS THE DOTS GLOBALLY */
  gap: 12px;
  align-items: center;
  margin-bottom: 5rem;
  padding: 0;
  list-style: none;
}

.slideshow__dot {
  width: 8px;
  height: 8px;
  background-color: rgba(var(--sys-color-secondary-rgb), 0.85);
  border-radius: 50%;
  cursor: pointer;
  transition: all 0.3s ease;
}

.slideshow__dot.active {
  background-color: var(--sys-color-tertiary);
  width: 24px;
  border-radius: 10px;
  box-shadow: 0 0 0 2px var(--sys-color-surface); /* Stabilizer Ring */
}

/* ================================================= */
/* === [V3] REFACTORED: BUTTONS (MUSCLE PASS)    === */
/* ================================================= */

/* 1. THE BLOCK (Base Style & Muscle) */
.button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.9rem 1.8rem;
  border-radius: 0.5rem;
  font-family: var(--font-body);
  font-weight: 600;
  font-size: 1.1rem;
  text-decoration: none;
  border: none;
  cursor: pointer;
  gap: 10px;

  /* 300ms transition to reduce "noise" */
  transition: all 300ms cubic-bezier(0.4, 0, 0.2, 1);
}

/* 2. MODIFIER: PRIMARY */
.button--primary {
  background-color: var(--sys-color-primary);
  color: var(--sys-color-on-primary);
}

.button--primary:hover:not(:disabled) {
  transform: translateY(-3px);
  box-shadow: 0 6px 15px rgba(var(--sys-color-tertiary-rgb), 0.4);
}

/* 3. MODIFIER: TONAL */
.button--tonal {
  background-color: var(--sys-color-primary-container);
  color: var(--sys-color-on-primary-container);
}

.button--tonal:hover:not(:disabled) {
  transform: translateY(-3px);
  background-color: rgba(var(--sys-color-primary-rgb), 0.18);
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15); /* Grey Shadow */
}

/* 4. THE MOBILE SOLUTION: ACTIVE STATE */
.button:active:not(:disabled) {
  transform: translateY(1px) scale(0.98);
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
  filter: brightness(0.9);
}

/* 5. THE BUTTON GROUP (Layout Wrapper) - KEEPING FROM BONES */
.button-group {
  margin-top: 2rem;
  display: flex;
  justify-content: center;
  gap: 1rem;
  flex-wrap: wrap;
}

/* RESPONSIVE: Stack buttons on small screens - KEEPING FROM BONES */
@media screen and (max-width: 600px) {
  .button-group {
    flex-direction: column;
    align-items: stretch;
  }

  .button-group .button {
    width: 100%;
  }
}

.button-group {
  order: 4; /* Buttons Last on Mobile */
  justify-content: center;
}

/* --- 6. RESPONSIVE ENGINE (DESKTOP ENHANCEMENT 810px+) --- */
@media screen and (min-width: 810px) {
  /* 1. RESTORE GRID */
  .feature-block__grid {
    flex-direction: row;
    justify-content: center;
    gap: 5rem;
  }

  .feature-block__grid--reverse {
    flex-direction: row-reverse;
  }

  /* 2. RESTORE CONTENT FLEX (Kill display: contents) */
  .feature-block__content {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }
  
  /* Reset Orders (Flex container ignores child order relative to separate flex items) */
  /* But strictly, cleaner to reset if they leak? Flex items (Image vs Content) order matches source or row-reverse. */
  
  /* 3. DESKTOP QUOTE LOGIC (Alt faces right) */
  .feature-block--alt .feature-block__quote-box {
    border-left: none;
    border-right: 4px solid var(--sys-color-secondary);
  }
  
  /* Reset Text Align */
  .feature-block__title--column,
  .feature-block__intro-text,
  .feature-block__quote-box {
    text-align: left; /* Or center? User didn't specify, but usually Side-by-Side implies left align. keeping center for now as "safe" unless requested. User style guide implies center for these blocks usually. */
  }
}

/* ================================================= */
/* === [V3] REFACTORED: CONTACT MODAL & FORM      === */
/* ================================================= */

/* 1. THE OVERLAY (Dark Shadow) */
.contact-modal {
  display: flex;
  align-items: center;
  justify-content: center;
  position: fixed;
  z-index: 2000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.7);
  overflow-y: auto;
}

/* 2. THE CONTENT CARD (Outer Shell) */
.contact-modal__content {
  position: relative;
  background-color: var(--sys-color-surface);
  padding: 1.5rem; /* Reduced padding to let the inner form shine */
  border-radius: 0.8rem;
  border: 1px solid var(--sys-color-outline);
  width: 90%;
  max-width: 500px;
  box-shadow: var(--shadow-modal);
  animation: modal-open-anim 0.4s ease-out;
}

/* 3. THE INNER FORM (Pine Green Backdrop) */
.contact-modal__form {
  border-radius: 0.3125rem;
  background-color: var(--sys-color-surface-variant); /* YOUR PINE BACKDROP */
  padding: 1.5rem;
  /* Restoring the subtle violet accent glow to the form container */
  box-shadow: var(--shadow-subtle), var(--glow-accent-subtle);
}

.contact-modal__form h2 {
  max-width: 100%;
  text-align: center;
  margin-bottom: 1.2rem;
  color: white; /* Contrast against the Pine background */
}

/* 4. BRANDED INPUTS (Green Border + Violet Glow) */
.contact-modal__form input[type="text"],
.contact-modal__form input[type="email"],
.contact-modal__form textarea {
  width: 100%;
  padding: 0.75rem;
  border: 1px solid var(--sys-color-primary); /* PINE BORDER */
  border-radius: 0.5rem;
  margin-top: 0.375rem;
  margin-bottom: 1rem;
  font-family: inherit;
  font-size: 1rem;
  background-color: var(--sys-color-surface);
  box-sizing: border-box;
  transition: all 0.2s ease;
}

/* FOCUS STATE: Magenta Energy Glow */
.contact-modal__form input:focus,
.contact-modal__form textarea:focus {
  border-color: var(--sys-color-tertiary); /* MAGENTA BORDER */
  box-shadow: var(--glow-accent-subtle); /* VIOLET GLOW */
  outline: none;
}

/* 5. THE SUBMIT BUTTON & DISABLED STATE */
.contact-modal__button--submit {
  width: 100%;
  margin-top: 1rem;
}

/* Restoring your specific hover glow for the submit button */
.contact-modal__form .contact-modal__button--submit:hover:not(:disabled) {
  box-shadow: var(--glow-accent-strong-inset), var(--glow-accent-subtle);
}

/* THE PRO DISABLED STATE: Restored */
.contact-modal__button--submit:disabled {
  opacity: 0.45;
  cursor: not-allowed;
  pointer-events: none;
  filter: grayscale(0.4);
  transform: none;
}

/* 6. CLOSE ICON (With your requested rotation) */
.contact-modal__close-icon {
  position: absolute;
  top: 5px;
  right: 5px;
  background: none;
  border: none;
  font-size: 22px;
  color: var(--sys-color-on-surface);
  cursor: pointer;
  padding: 5px;
  transition: color 0.2s ease, transform 0.3s ease;
  z-index: 10;
}

.contact-modal__close-icon:hover {
  color: var(--sys-color-tertiary);
  transform: rotate(90deg);
}

/* ================================================= */
/* === [V3] TABLET TRANSITION (1070px to 769px)   === */
/* ================================================= */
@media screen and (max-width: 1070px) and (min-width: 810px) {
  .navbar__links {
    /* Constrain the menu and center it to pull brackets from the edge */
    max-width: 800px;
    margin: 0 auto;
    justify-content: center;
    padding-right: 0;
  }

  .hero__title {
    font-size: 2.75rem; /* Slightly smaller for tablet */
  }

  .feature-block__grid {
    gap: 3rem; /* Tighten up the gutters */
  }
}

/* ================================================= */
/* === [V18] GRID ARCHITECTURAL RESET (809px)    === */
/* ================================================= */





/* ================================================= */
/* === [V19] SEMANTIC FOOTER REFACTOR            === */
/* ================================================= */

footer {
  background-color: var(--sys-color-on-surface); /* Charcoal */
  /* Switched to Pseudo-Element for cleaner stacking */
  border: none;
  position: relative; /* Anchor for ::before */
  overflow: visible;
  padding: 0; /* Slim utility bar */
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100%;
}

/* THE ACCENT LINE (Footer) */
footer::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 4px;
  background: linear-gradient(to right, transparent 5%, var(--sys-color-secondary) 15%, var(--sys-color-secondary) 85%, transparent 95%);
  z-index: 5;
}

/* Override existing navbar styles if they leak in via the 'navbar' class on nav */
footer .navbar {
  background-color: transparent;
  box-shadow: none;
  border: none; /* Ensure no double lines */
  position: static;
  /* SAFE HARBOR PADDING: Prevent edge crowding */
  padding: 0 40px; 
  /* height: 45px; Removed: Let padding on links drive "heft" */
  flex-direction: row;
  flex-wrap: nowrp; /* Prevent wrapping to stop disappearing links */
  justify-content: center;
  align-items: stretch; /* Pixel-Perfect Hover Heights */
  /* CELL LOGIC: Remove gap so padded links sit flush */
  gap: 0;
  height: auto; /* Let content/padding stick */ 
  width: auto; /* Let it shrink/grow with content */
  max-width: 100%;
  overflow-x: auto; /* Safety scroll for extreme tiny screens */
  overflow: visible; /* Needed for the overlapping highlight line */
}

/* Explicitly kill the safety shelf in footer */
footer .navbar::after {
  content: none !important;
  display: none !important;
}

/* Mobile override for footer nav - Conversion-First Stack */
@media screen and (max-width: 768px) {
  footer .navbar {
    flex-direction: column; /* Stack vertically */
    height: auto; /* Allow growth */
    gap: 0; /* Remove gap, use padding/height on links */
    width: 100%;
    align-items: stretch; /* Full width */
    padding: 0 0 1rem 0; /* Clear horizontal safe harbor, keep bottom space */
  }

  footer .navbar__link {
    width: 100%;
    justify-content: center; /* Center text */
    /* top nav padding matching mobile heft */
    padding: 14px 24px; 
    margin: 0;
    border-radius: 0;
  }

  /* Interaction Swap: Move Highlight to Bottom on Mobile */
  footer .navbar__link:hover::after {
    top: auto; /* Reset top */
    bottom: 0; /* Move to bottom */
    height: 4px; /* Brand visual weight */
    z-index: 5;
  }
}

footer .navbar__link {
  color: var(--sys-color-surface);
  font-family: var(--font-body);
  /* FONT MATCH: Sync with top header scale */
  font-size: clamp(14px, 1.1vw, 17px); 
  text-decoration: none;
  transition: all 0.3s ease;
  
  /* BOX MODEL SYNC: Match Top Nav "Heft" */
  padding: 14px 24px; 
  display: flex;
  align-items: center;
  height: auto; /* Let container stretch define it if needed, or 100% */
  position: relative;
  white-space: nowrap; /* Prevent text wrap */
  border-radius: 0; /* Square edges for full-height hover */
  margin-bottom: 0;
}

/* Mobile Link Adjustment */
@media screen and (max-width: 600px) {
  footer .navbar__link {
    /* Keep the massive padding for touch targets, maybe slightly less horizontal if needed, 
       but user requested "Keep the padding: 14px 24px here" */
    padding: 14px 24px; 
    font-size: 0.9rem; 
  }
}

footer .navbar__link:hover {
  color: var(--sys-color-surface); /* Keep White */
  background-color: #444; /* Standard Charcoal Hover (Slightly lighter) */
}

/* THE MIRROR ACCENT: Magenta Highlight at TOP (Desktop Default) */
footer .navbar__link:hover::after {
  content: "";
  position: absolute;
  top: 0; /* Inverted Accent on Desktop */
  left: 0;
  width: 100%;
  height: 4px; /* Matched to Accent Lines */
  background-color: var(--sys-color-tertiary); /* Magenta */
  display: block;
  border-radius: 0 0 2px 2px; /* Soften slightly */
  z-index: 5; /* Ensure it sits on top of the border */
}

/* Remove the active/bracket styling from footer links if they accidentally inherit it */
footer .navbar__link.active {
  background-color: transparent;
  color: var(--sys-color-surface);
  border-radius: 0;
  margin-bottom: 0;
  pointer-events: auto;
}

footer .navbar__link.active::before,
footer .navbar__link.active::after {
  display: none;
}